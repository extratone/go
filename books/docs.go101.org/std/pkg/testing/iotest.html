<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: testing/iotest</title>
<link href="../../css/light-v0.3.1.css" rel="stylesheet">
<script src="../../jvs/golds-v0.3.1.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>iotest</b></span>

<span class="title">Import Path</span>
	<a href="../../index.html#pkg-testing/iotest">testing/iotest</a><i> (on <a href="https://golang.org/pkg/testing/iotest/" target="_blank">golang.org</a> and <a href="https://pkg.go.dev/testing/iotest" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../dep/testing/iotest.html">5 packages</a>, and imported by <a href="../../dep/testing/iotest.html#imported-by">one package</a>

<div id="files"><span class="title">Involved Source Files</span>

	<span class="nodocs">      <a href="../../src/testing/iotest/logger.go.html">logger.go</a></span>
	<input type='checkbox' checked class="fold" id="file-1-fold-content"><label for="file-1-fold-content">   <a href="../../src/testing/iotest/reader.go.html#doc">dâžœ</a> <a href="../../src/testing/iotest/reader.go.html">reader.go</a></label><span id='file-1-fold-content-items' class="fold-items">
		Package iotest implements Readers and Writers useful mainly for testing.
</span>
	<span class="nodocs">      <a href="../../src/testing/iotest/writer.go.html">writer.go</a></span></div>
<div id="examples"><span class="title">Code Examples</span>

	<input type='checkbox' class="fold" id="example-0-fold-content"><label for="example-0-fold-content">ErrReader</label><span id='example-0-fold-content-items' class="fold-items">
		package main
		
		import (
			"errors"
			"fmt"
			"testing/iotest"
		)
		
		func main() {
			// A reader that always returns a custom error.
			r := iotest.ErrReader(errors.New("custom error"))
			n, err := r.Read(nil)
			fmt.Printf("n:   %d\nerr: %q\n", n, err)
		
		}
</span>
</div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 9)</i></span></span>

<div class="anchor value-res" id="name-DataErrReader">	<input type='checkbox' class="fold" id="DataErrReader-fold-content"><label for="DataErrReader-fold-content"> func <a href="../../src/testing/iotest/reader.go.html#line-47">DataErrReader</a>(r <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a>) <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a></label><span id='DataErrReader-fold-content-docs' class="fold-docs">
		DataErrReader changes the way errors are handled by a Reader. Normally, a
		Reader returns an error (typically EOF) from the first Read call after the
		last piece of data is read. DataErrReader wraps a Reader and changes its
		behavior so the final error is returned along with the final data, instead
		of in the first call after the final data.

</span></div><div class="anchor value-res" id="name-ErrReader">	<input type='checkbox' class="fold" id="ErrReader-fold-content"><label for="ErrReader-fold-content"> func <a href="../../src/testing/iotest/reader.go.html#line-94">ErrReader</a>(err <a href="../builtin.html#name-error">error</a>) <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a></label><span id='ErrReader-fold-content-docs' class="fold-docs">
		ErrReader returns an io.Reader that returns 0, err from all Read calls.

</span></div><div class="anchor value-res" id="name-HalfReader">	<input type='checkbox' class="fold" id="HalfReader-fold-content"><label for="HalfReader-fold-content"> func <a href="../../src/testing/iotest/reader.go.html#line-32">HalfReader</a>(r <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a>) <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a></label><span id='HalfReader-fold-content-docs' class="fold-docs">
		HalfReader returns a Reader that implements Read
		by reading half as many requested bytes from r.

</span></div><div class="anchor value-res" id="name-NewReadLogger">	<input type='checkbox' class="fold" id="NewReadLogger-fold-content"><label for="NewReadLogger-fold-content"> func <a href="../../src/testing/iotest/logger.go.html#line-52">NewReadLogger</a>(prefix <a href="../builtin.html#name-string">string</a>, r <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a>) <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a></label><span id='NewReadLogger-fold-content-docs' class="fold-docs">
		NewReadLogger returns a reader that behaves like r except
		that it logs (using log.Printf) each read to standard error,
		printing the prefix and the hexadecimal data read.

</span></div><div class="anchor value-res" id="name-NewWriteLogger">	<input type='checkbox' class="fold" id="NewWriteLogger-fold-content"><label for="NewWriteLogger-fold-content"> func <a href="../../src/testing/iotest/logger.go.html#line-30">NewWriteLogger</a>(prefix <a href="../builtin.html#name-string">string</a>, w <a href="../io.html">io</a>.<a href="../io.html#name-Writer">Writer</a>) <a href="../io.html">io</a>.<a href="../io.html#name-Writer">Writer</a></label><span id='NewWriteLogger-fold-content-docs' class="fold-docs">
		NewWriteLogger returns a writer that behaves like w except
		that it logs (using log.Printf) each write to standard error,
		printing the prefix and the hexadecimal data written.

</span></div><div class="anchor value-res" id="name-OneByteReader">	<input type='checkbox' class="fold" id="OneByteReader-fold-content"><label for="OneByteReader-fold-content"> func <a href="../../src/testing/iotest/reader.go.html#line-17">OneByteReader</a>(r <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a>) <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a></label><span id='OneByteReader-fold-content-docs' class="fold-docs">
		OneByteReader returns a Reader that implements
		each non-empty Read by reading one byte from r.

</span></div><div class="anchor value-res" id="name-TestReader">	<input type='checkbox' class="fold" id="TestReader-fold-content"><label for="TestReader-fold-content"> func <a href="../../src/testing/iotest/reader.go.html#line-136">TestReader</a>(r <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a>, content []<a href="../builtin.html#name-byte">byte</a>) <a href="../builtin.html#name-error">error</a></label><span id='TestReader-fold-content-docs' class="fold-docs">
		TestReader tests that reading from r returns the expected file content.
		It does reads of different sizes, until EOF.
		If r implements io.ReaderAt or io.Seeker, TestReader also checks
		that those operations behave as they should.

		If TestReader finds any misbehaviors, it returns an error reporting them.
		The error text may span multiple lines.

</span></div><div class="anchor value-res" id="name-TimeoutReader">	<input type='checkbox' class="fold" id="TimeoutReader-fold-content"><label for="TimeoutReader-fold-content"> func <a href="../../src/testing/iotest/reader.go.html#line-78">TimeoutReader</a>(r <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a>) <a href="../io.html">io</a>.<a href="../io.html#name-Reader">Reader</a></label><span id='TimeoutReader-fold-content-docs' class="fold-docs">
		TimeoutReader returns ErrTimeout on the second read
		with no data. Subsequent calls to read succeed.

</span></div><div class="anchor value-res" id="name-TruncateWriter">	<input type='checkbox' class="fold" id="TruncateWriter-fold-content"><label for="TruncateWriter-fold-content"> func <a href="../../src/testing/iotest/writer.go.html#line-11">TruncateWriter</a>(w <a href="../io.html">io</a>.<a href="../io.html#name-Writer">Writer</a>, n <a href="../builtin.html#name-int64">int64</a>) <a href="../io.html">io</a>.<a href="../io.html#name-Writer">Writer</a></label><span id='TruncateWriter-fold-content-docs' class="fold-docs">
		TruncateWriter returns a Writer that writes to w
		but stops silently after n bytes.

</span></div></div>
<div id="exported-variables"><span class="title">Package-Level Variables<span class="title-stat"><i> (only one)</i></span></span>

<div class="anchor value-res" id="name-ErrTimeout">	<input type='checkbox' class="fold" id="ErrTimeout-fold-content"><label for="ErrTimeout-fold-content">  var <a href="../../src/testing/iotest/reader.go.html#line-74">ErrTimeout</a> <a href="../builtin.html#name-error">error</a></label><span id='ErrTimeout-fold-content-docs' class="fold-docs">
		ErrTimeout is a fake timeout error.

</span></div></div></code></pre><pre id="footer"><table><tr><td><img src="../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="../../../../go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.1</i>. (GOOS=linux GOARCH=amd64)
<b>Golds</b> is a <a href="../../../../go101.org/index.html">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>